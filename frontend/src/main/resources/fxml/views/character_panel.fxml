<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.shape.Line?>
<?import javafx.scene.effect.DropShadow?>

<HBox xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" 
      fx:controller="com.ctrlaltquest.ui.controllers.views.CharacterPanelController"
      spacing="40" styleClass="view-container" stylesheets="@/styles/home.css"
      style="-fx-background-color: transparent;" alignment="CENTER">

    <padding><Insets top="30" right="40" bottom="30" left="40"/></padding>

    <VBox spacing="15" alignment="TOP_CENTER" prefWidth="350" 
          style="-fx-background-color: rgba(10, 10, 15, 0.6); -fx-background-radius: 20; -fx-border-color: rgba(255,255,255,0.05); -fx-border-radius: 20; -fx-padding: 30;">
        
        <VBox spacing="2" alignment="CENTER">
            <Label fx:id="lblClassName" text="CLASE" styleClass="text-tiny-bright" style="-fx-text-fill: #aaa;"/>
            <Label fx:id="lblCharName" text="HÉROE" styleClass="hero-name" style="-fx-font-size: 26px;"/>
            <Label fx:id="lblLevel" text="NVL. 1" styleClass="text-lvl-value" style="-fx-font-size: 16px; -fx-text-fill: #f7d27a;"/>
        </VBox>

        <Region VBox.vgrow="ALWAYS"/>

        <GridPane hgap="30" vgap="30" alignment="CENTER">
            <StackPane fx:id="slotHead" GridPane.columnIndex="0" GridPane.rowIndex="0" styleClass="item-slot-empty">
                <Label text="H" textFill="#444" style="-fx-font-weight: bold;"/>
            </StackPane>
            
            <StackPane fx:id="slotChest" GridPane.columnIndex="0" GridPane.rowIndex="1" styleClass="item-slot-empty">
                <Label text="C" textFill="#444" style="-fx-font-weight: bold;"/>
            </StackPane>

            <StackPane GridPane.columnIndex="1" GridPane.rowIndex="0" GridPane.rowSpan="3" alignment="CENTER" minWidth="180">
                <effect><DropShadow color="rgba(0,0,0,0.8)" radius="50" offsetY="20"/></effect>
                <ImageView fx:id="imgAvatar" fitHeight="350" fitWidth="200" preserveRatio="true"/>
            </StackPane>
            
            <StackPane fx:id="slotWeapon" GridPane.columnIndex="2" GridPane.rowIndex="0" styleClass="item-slot-empty">
                <Label text="W" textFill="#444" style="-fx-font-weight: bold;"/>
            </StackPane>
            
            <StackPane fx:id="slotLegs" GridPane.columnIndex="2" GridPane.rowIndex="1" styleClass="item-slot-empty">
                <Label text="L" textFill="#444" style="-fx-font-weight: bold;"/>
            </StackPane>
        </GridPane>
        
        <Region VBox.vgrow="ALWAYS"/>
    </VBox>

    <VBox HBox.hgrow="ALWAYS" styleClass="activity-card" style="-fx-padding: 0; -fx-background-color: rgba(20, 20, 25, 0.9);">
        
        <TabPane tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS" styleClass="custom-tab-pane" style="-fx-background-color: transparent;">
            
            <Tab text="ATRIBUTOS">
                <VBox spacing="25" style="-fx-padding: 30;">
                    <Label text="ESTADÍSTICAS BASE" styleClass="section-title-small" style="-fx-text-fill: #f7d27a;"/>
                    
                    <VBox spacing="20">
                        <VBox spacing="8">
                            <HBox alignment="CENTER_LEFT">
                                <Label text="CPU (Fuerza)" styleClass="text-tiny"/>
                                <Region HBox.hgrow="ALWAYS"/>
                                <Label fx:id="lblStrVal" text="0" styleClass="text-lvl-value" style="-fx-text-fill: #ff6b6b;"/>
                            </HBox>
                            <ProgressBar fx:id="barStr" progress="0.0" styleClass="custom-xp-bar" maxWidth="Infinity" style="-fx-accent: #ff6b6b; -fx-pref-height: 12;"/>
                        </VBox>

                        <VBox spacing="8">
                            <HBox alignment="CENTER_LEFT">
                                <Label text="RAM (Agilidad)" styleClass="text-tiny"/>
                                <Region HBox.hgrow="ALWAYS"/>
                                <Label fx:id="lblDexVal" text="0" styleClass="text-lvl-value" style="-fx-text-fill: #4ade80;"/>
                            </HBox>
                            <ProgressBar fx:id="barDex" progress="0.0" styleClass="custom-xp-bar" maxWidth="Infinity" style="-fx-accent: #4ade80; -fx-pref-height: 12;"/>
                        </VBox>

                        <VBox spacing="8">
                            <HBox alignment="CENTER_LEFT">
                                <Label text="CODE (Intelecto)" styleClass="text-tiny"/>
                                <Region HBox.hgrow="ALWAYS"/>
                                <Label fx:id="lblIntVal" text="0" styleClass="text-lvl-value" style="-fx-text-fill: #60a5fa;"/>
                            </HBox>
                            <ProgressBar fx:id="barInt" progress="0.0" styleClass="custom-xp-bar" maxWidth="Infinity" style="-fx-accent: #60a5fa; -fx-pref-height: 12;"/>
                        </VBox>
                    </VBox>
                    
                    <Separator styleClass="menu-separator"/>
                    <Button text="REASIGNAR PUNTOS" styleClass="btn-nav" style="-fx-alignment: CENTER;"/>
                </VBox>
            </Tab>

            <Tab text="MOCHILA">
                <VBox spacing="15" style="-fx-padding: 20;">
                    <HBox alignment="CENTER_LEFT">
                        <Label text="OBJETOS" styleClass="section-title-small" style="-fx-text-fill: #d4af37;"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Label text="6/20" styleClass="text-tiny"/>
                    </HBox>

                    <ScrollPane fitToWidth="true" styleClass="transparent-scroll" VBox.vgrow="ALWAYS" 
                                style="-fx-background: rgba(0,0,0,0.3); -fx-background-radius: 8; -fx-padding: 10;">
                        <FlowPane fx:id="inventoryGrid" hgap="12" vgap="12" prefWrapLength="300"/>
                    </ScrollPane>

                    <VBox spacing="10" style="-fx-background-color: rgba(255,255,255,0.03); -fx-padding: 15; -fx-background-radius: 8; -fx-min-height: 120;">
                         <HBox spacing="15">
                            <StackPane fx:id="selectedItemPreview" prefWidth="60" prefHeight="60" 
                                       style="-fx-border-color: #444; -fx-border-radius: 8; -fx-border-width: 1;">
                            </StackPane>
                            
                            <VBox spacing="4" HBox.hgrow="ALWAYS">
                                <Label fx:id="lblSelectedItemName" text="SELECCIONA UN ITEM" wrapText="true" 
                                       styleClass="text-tiny-bright" style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
                                <Label fx:id="lblSelectedItemType" text="---" styleClass="text-tiny"/>
                            </VBox>
                        </HBox>
                        
                        <Label fx:id="lblSelectedItemDesc" text="..." wrapText="true" 
                               style="-fx-text-fill: #888; -fx-font-size: 11px;" VBox.vgrow="ALWAYS" alignment="TOP_LEFT"/>
                               
                        <HBox spacing="10" alignment="CENTER_RIGHT">
                            <Button fx:id="btnUse" text="USAR" disable="true" styleClass="btn-nav" style="-fx-font-size: 11px;"/>
                            <Button fx:id="btnEquip" text="EQUIPAR" disable="true" styleClass="btn-action-primary" style="-fx-font-size: 11px;"/>
                        </HBox>
                    </VBox>
                </VBox>
            </Tab>

        </TabPane>
    </VBox>

</HBox>