<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.media.MediaView?>
<?import javafx.scene.image.*?>
<?import java.net.URL?>

<StackPane xmlns:fx="http://javafx.com/fxml" 
           fx:controller="com.ctrlaltquest.ui.controllers.ForgotPasswordController"
           prefWidth="1280" prefHeight="720" styleClass="root">
    
    <stylesheets>
        <URL value="@/styles/auth.css" />
    </stylesheets>
    
    <MediaView fx:id="backgroundVideo" fitWidth="1280" fitHeight="720" preserveRatio="false" />
    
    <Region style="-fx-background-color: rgba(13, 9, 21, 0.75);" />

    <BorderPane>
        <center>
            <StackPane maxWidth="500" maxHeight="550" styleClass="auth-panel">
                
                <VBox fx:id="stepEmail" alignment="CENTER" spacing="30">
                    <VBox alignment="CENTER" spacing="10">
                        <Label text="RECUPERAR ACCESO" styleClass="auth-title-hero" />
                        <Label text="Enviaremos un código mágico a tu correo" 
                               style="-fx-text-fill: #a292b1; -fx-font-size: 14px; -fx-font-family: 'Runewood';" />
                    </VBox>

                    <VBox spacing="18" styleClass="input-group" maxWidth="400">
                        <VBox spacing="8">
                            <Label text="CORREO DE VINCULACIÓN" styleClass="input-label-runic-gold"/>
                            <TextField fx:id="emailField" promptText="ingresa@tu-correo.com" styleClass="custom-field" />
                        </VBox>
                    </VBox>

                    <VBox alignment="CENTER" spacing="15">
                        <Button fx:id="btnRecover" text="ENVIAR CÓDIGO" onAction="#handleRecover" 
                                styleClass="primary-button-hero" prefWidth="400" />
                        
                        <Button text="Recordé mi clave (Volver)" onAction="#handleBackToLogin" 
                                styleClass="link-button-clean" focusTraversable="false" />
                    </VBox>
                </VBox>

                <VBox fx:id="loadingLayer" visible="false" alignment="CENTER" spacing="20" 
                      style="-fx-background-color: rgba(26, 15, 38, 0.9); -fx-background-radius: 40; -fx-border-color: #f7d27a; -fx-border-radius: 40; -fx-border-width: 2;">
                    <ProgressIndicator prefWidth="70" prefHeight="70" />
                    <Label text="Consultando los archivos reales..." 
                           style="-fx-text-fill: #f7d27a; -fx-font-family: 'Runewood'; -fx-font-size: 18px;" />
                </VBox>
                
            </StackPane>
        </center>
    </BorderPane>
</StackPane>