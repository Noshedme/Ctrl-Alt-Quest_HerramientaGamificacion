<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.media.MediaView?>
<?import javafx.scene.image.*?>
<?import java.net.URL?>

<StackPane xmlns:fx="http://javafx.com/fxml" 
           fx:controller="com.ctrlaltquest.ui.controllers.RegisterController"
           prefWidth="1280" prefHeight="720" styleClass="root">
    
    <stylesheets>
        <URL value="@/styles/auth.css" />
    </stylesheets>
    
    <MediaView fx:id="backgroundVideo" fitWidth="1280" fitHeight="720" preserveRatio="false" />

    <Region style="-fx-background-color: rgba(13, 9, 21, 0.7);" />

    <BorderPane>
        <top>
            <HBox alignment="CENTER_RIGHT" spacing="15" styleClass="top-bar" style="-fx-padding: 25;">
                <Button text="⚙" onAction="#handleOpenSettings" styleClass="icon-button" focusTraversable="false" />
            </HBox>
        </top>

        <center>
            <StackPane>
                <VBox alignment="CENTER" spacing="25" maxWidth="550" maxHeight="700" styleClass="auth-panel">
                    
                    <Label text="CREAR CUENTA" styleClass="auth-title-hero" />
                    
                    <VBox spacing="18" styleClass="input-group" maxWidth="420">
                        <VBox spacing="6">
                            <Label text="CORREO" styleClass="input-label-runic-gold"/>
                            <TextField fx:id="emailField" promptText="tu@email.com" styleClass="custom-field" />
                        </VBox>
                        
                        <VBox spacing="6">
                            <Label text="IDENTIDAD" styleClass="input-label-runic-gold"/>
                            <TextField fx:id="usernameField" promptText="Tu nombre de usuario" styleClass="custom-field" />
                        </VBox>

                        <VBox spacing="6">
                            <Label text="CONTRASEÑA" styleClass="input-label-runic-gold"/>
                            <PasswordField fx:id="passwordField" promptText="Crea tu contraseña" styleClass="custom-field" />
                        </VBox>

                        <VBox spacing="6">
                            <Label text="CONFIRMAR CONTRASEÑA" styleClass="input-label-runic-gold"/>
                            <PasswordField fx:id="confirmPasswordField" promptText="Confirma tu contraseña" styleClass="custom-field" />
                        </VBox>
                    </VBox>
                    
                    <Button fx:id="btnRegister" text="REGISTRARSE" onAction="#handleRegister" 
                            styleClass="primary-button-hero" prefWidth="420" />
                    
                    <Button text="Ya tengo cuenta (Volver)" onAction="#handleBackToLogin" 
                            styleClass="link-button-clean" focusTraversable="false" />
                </VBox>

                <VBox fx:id="loadingLayer" visible="false" alignment="CENTER" spacing="20" 
                      style="-fx-background-color: rgba(26, 15, 38, 0.9); -fx-background-radius: 40; -fx-border-color: #f7d27a; -fx-border-radius: 40; -fx-border-width: 2;">
                    <ProgressIndicator prefWidth="70" prefHeight="70" />
                    <Label text="Registrando tu perfil tech..." 
                           style="-fx-text-fill: #f7d27a; -fx-font-family: 'Runewood'; -fx-font-size: 20px;" />
                </VBox>
            </StackPane>
        </center>
    </BorderPane>
</StackPane>